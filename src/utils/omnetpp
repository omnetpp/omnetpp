#!/bin/sh
#
# Detects the platform and architecture, and starts the IDE with the right launcher
#
IDEDIR=`dirname $0`/../ide                                                                                        
cd $IDEDIR                                                                                                        
PLATFORM=`uname -sm`
LAUNCHER=omnetpp

echo Starting the OMNeT++ IDE...

if java -version 2>&1 | grep -i "libgcj" >/dev/null 2>/dev/null; then
  echo "A compatible JRE is required to run the IDE. "
  echo "Found GNU GIJ which is not supported. Please use Sun JRE or Open JRE 1.5+"
  echo "If you have several JDKs installed on you machine, change the default JVM."
  echo "You can switch between Java VMs with the 'sudo update-alternatives --config java' command."
  exit 1;
fi

#set default language so GCC will report errors in english. see bug #3
export LANG=en_US.UTF-8
# to fix GTK issues in eclipse 3.5.x
export GDK_NATIVE_WINDOWS=1

case $PLATFORM in 
*MINGW*)
	./${LAUNCHER}.exe & 
        ;; 
*Linux*x86_64*) 
	./${LAUNCHER}64 & 
        ;; 
*Linux*) 
	./$LAUNCHER & 
        ;; 
*Darwin*)
	open ${LAUNCHER}.app
        ;; 
*) 
	echo OMNeT++ IDE is supported only on: Linux 32/64bit, Windows 32bit, MacOS X Intel/PPC
	exit 1
        ;; 
esac
